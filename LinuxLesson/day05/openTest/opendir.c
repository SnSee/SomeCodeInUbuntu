#include <stdio.h>
#include <sys/types.h>
#include <dirent.h>
#include <errno.h>
#include <string.h>

int main(int argc, char *argv[]){
	if(argc != 2){
		printf("need 2 arguments");
		return -1;
	}
//open a directory
	DIR *dp = opendir(argv[1]);
	if(NULL == dp){
		printf("error open %s:%s", argv[1], strerror(errno));
		return -1;
	}

	//read the files(include sub-directories) of the opened directory
	struct dirent *dir;
	while(NULL != (dir = readdir(dp))){
//print the information in struct dirent
		//number of inode
		printf("%ld\t", dir->d_ino);
		//file type
		switch(dir->d_type){
		case DT_REG:
			printf("  regular file");
			break;
		case DT_DIR:
			printf("directory file");
			break;
		default:
			printf("  unknown file");
			break;
		}
		//file name
		printf("\t%s\n", dir->d_name);
	}
//close directory stream
	closedir(dp);
	return 0;
}
